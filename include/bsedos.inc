@DEFINE		MACRO	CALLNAME
			IFNDEF	CALLNAME
				EXTERN	CALLNAME: FAR
			ENDIF
			ENDM

@PUSHW		MACRO	ARG
			MOV		AX,ARG
			PUSH	AX
			ENDM

@PUSHS		MACRO	ARG
			.ERRB	<ARG>
			MOV		AX,SEG ARG
			PUSH	AX
			LEA		AX,ARG
			PUSH	AX
			ENDM

@PUSHD		MACRO	ARG
			.ERRB	<ARG>
			IF(OPATTR(ARG) EQ 35h)	; Immediate and defined
				MOV		AX, LOWWORD ARG
				PUSH	AX
				MOV		AX, HIGHWORD ARG
				PUSH	AX
			ELSE
			PUSH	DS              ;SAVE DATA SEGMENT
			PUSH	BX              ;SAVE CURRENT BX VALUE
			MOV		AX, SEG ARG
			MOV		DS, AX
			MOV		BX, OFFSET ARG  ;LOAD BX WITH OFFSET VALUE
			PUSH	WORD PTR [BX]   ;PUSH LOW-ORDER OF 32 BIT VAL STACK
			MOV		AX,[BX+2]       ;PUT HIGH ORDER 32-BIT VALUE IN AX
			PUSH	BP              ;SAVE REGISTER
			MOV		BP,SP
			XCHG	[BP+6],AX       ;
			POP		BP              ;RESTORE
			MOV		DS,AX           ;RESTORE DS TO SAVED VALUE.
			POP		AX              ;POP OFF LOW ORDER 32 BIT VAL
			POP		BX              ;RESTORE BX TO SAVED VALUE.
			PUSH	AX              ;PUT LOW ORDER 32 BIT VALUE ON STACK
			ENDIF
			ENDM

SEG_NONSHARED	EQU	0
SEG_GIVEABLE	EQU	1
SEG_GETTABLE	EQU	2
SEG_DISCARDABLE	EQU	4

COUNTRYCODE	struc
		country		DW	?
		codepage	DW	?
COUNTRYCODE	ends

@DosOpen	MACRO	NAME,HANDLE,ACTION,SIZE,ATTRIB,FLAG,MODE,RSRVD
		@DEFINE	DOSOPEN
		@PUSHS	NAME
		@PUSHS	HANDLE
		@PUSHS	ACTION
		@PUSHD	SIZE
		@PUSHW	ATTRIB
		@PUSHW	FLAG
		@PUSHW	MODE
		@PUSHD	RSRVD
		CALL	DOSOPEN
		ENDM

@DosClose	MACRO	HANDLE
		@DEFINE	DOSCLOSE
		@PUSHW	HANDLE
		CALL	DOSCLOSE
		ENDM

@DosGetInfoSeg	MACRO	GLOBAL,LOCAL
		@DEFINE	DOSGETINFOSEG
		@PUSHS	GLOBAL
		@PUSHS	LOCAL
		CALL	DOSGETINFOSEG
		ENDM

@DosLoadModule	MACRO	BUFFADDR,BUFFLEN,NAME,HANDLE
		@DEFINE	DOSLOADMODULE
		@PUSHD	BUFFADDR
		@PUSHW	BUFFLEN
		@PUSHS	NAME
		@PUSHS	HANDLE
		CALL	FAR PTR DOSLOADMODULE
		ENDM

@DosGetProcAddr	MACRO	HANDLE,NAME,ADDR
		@DEFINE	DOSGETPROCADDR
		@PUSHW	HANDLE
		@PUSHS	NAME
		@PUSHS	ADDR
		CALL	FAR PTR DOSGETPROCADDR
		ENDM

@DosFreeModule	MACRO	HANDLE
		@DEFINE	DOSFREEMODULE
		@PUSHW	HANDLE
		CALL	FAR PTR DOSFREEMODULE
		ENDM
