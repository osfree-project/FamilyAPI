;/*!
;   @file
;
;   @ingroup fapi
;
;   @brief Family API implementation
;
;   (c) osFree Project 2021, <http://www.osFree.org>
;   for licence see licence.txt in root directory, or project website
;
;   This is Family API implementation for DOS, used with BIND tools
;   to link required API
;
;   @author Yuri Prokushev (yuri.prokushev@gmail.com)
;
;*/


KI_KBDCHARIN	EQU	00H
KI_KBDPEEK	EQU	01H
KI_KBDFLUSHBUFFER	EQU	02H
KI_KBDGETSTATUS	EQU	03H
KI_KBDSETSTATUS	EQU	04H
KI_KBDSTRINGIN	EQU	05H
KI_KBDOPEN	EQU	06H
KI_KBDCLOSE	EQU	07H
KI_KBDGETFOCUS	EQU	08H
KI_KBDFREEFOCUS	EQU	09H
KI_KBDGETCP	EQU	0AH
KI_KBDSETCP	EQU	0BH
KI_KBDXLATE	EQU	0CH
KI_KBDSETCUSTXT	EQU	0DH
KI_KBDGETHWID	EQU	0EH

@KBDROUTE	MACRO	FUNC
			MOV	AX, @CATSTR(KI_, FUNC)
			PUSH	AX
			MOV	AX, _DATA
			MOV	ES, AX
			MOV	AX, WORD PTR ES:KBDFUNCTIONMASK
			AND	AX, LOWWORD @CATSTR(KR_, FUNC)
			CMP	AX, LOWWORD @CATSTR(KR_, FUNC)
			CALL    KBDROUTE
			ENDM

@KBDPROC	MACRO	NAME, ARGS: VARARG

		@KBDPROLOG	NAME
		FOR ARG, <ARGS>
			ARG
		ENDM
		@KBDSTART	NAME
		CALL	@CATSTR(Pre, NAME)
		@KBDROUTE	NAME
		CALL	@CATSTR(Post, NAME)
		@KBDEPILOG	NAME

			ENDM

