;/*!
;   @file
;
;   @ingroup fapi
;
;   @brief Family API implementation
;
;   (c) osFree Project 2018, <http://www.osFree.org>
;   for licence see licence.txt in root directory, or project website
;
;   This is Family API implementation for DOS, used with BIND tools
;   to link required API
;
;   @author Yuri Prokushev (yuri.prokushev@gmail.com)
;
;*/

VI_VIOGETPHYSBUF	EQU	0
VI_VIOGETBUF		EQU	1
VI_VIOSHOWBUF		EQU	2
VI_VIOGETCURPOS		EQU	3
VI_VIOGETCURTYPE	EQU	4
VI_VIOGETMODE		EQU	5
VI_VIOSETCURPOS		EQU	6
VI_VIOSETCURTYPE	EQU	7
VI_VIOSETMODE		EQU	8
VI_VIOREADCHARSTR	EQU	9
VI_VIOREADCELLSTR	EQU	10
VI_VIOWRTNCHAR		EQU	11
VI_VIOWRTNATTR		EQU	12
VI_VIOWRTNCELL		EQU	13
VI_VIOWRTCHARSTR	EQU	14
VI_VIOWRTCHARSTRATT	EQU	15
VI_VIOWRTCELLSTR	EQU	16
VI_VIOWRTTTY		EQU	17
VI_VIOSCROLLUP		EQU	18
VI_VIOSCROLLDN		EQU	19
VI_VIOSCROLLLF		EQU	20
VI_VIOSCROLLRT		EQU	21
VI_VIOSETANSI		EQU	22
VI_VIOGETANSI		EQU	23
VI_VIOPRTSC		EQU	24
VI_VIOSCRLOCK		EQU	25
VI_VIOSCRUNLOCK		EQU	26
VI_VIOSAVREDRAWWAIT	EQU	27
VI_VIOSAVREDRAWUNDO	EQU	28
VI_VIOPOPUP		EQU	29
VI_VIOENDPOPUP		EQU	30
VI_VIOPRTSCTOGGLE	EQU	31
VI_VIOMODEWAIT		EQU	32
VI_VIOMODEUNDO		EQU	33
VI_VIOGETFONT		EQU	34
VI_VIOGETCONFIG		EQU	35
VI_VIOSETCP		EQU	36
VI_VIOGETCP		EQU	37
VI_VIOSETFONT		EQU	38
VI_VIOGETSTATE		EQU	39
VI_VIOSETSTATE		EQU	40

@VIOROUTE	MACRO	FUNC, MASK, OFF
			MOV	AX, @CATSTR(VI_, FUNC)
			PUSH	AX
			MOV		AX, _DATA
			MOV		ES, AX
			MOV	AX, WORD PTR ES:@CATSTR(VIOFUNCTIONMASK, MASK)+OFF
			IF	OFF EQ 0
			AND	AX, LOWWORD @CATSTR(VR_, FUNC)
			CMP	AX, LOWWORD @CATSTR(VR_, FUNC)
			ELSE
			AND	AX, HIGHWORD @CATSTR(VR_, FUNC)
			CMP	AX, HIGHWORD @CATSTR(VR_, FUNC)
			ENDIF
			CALL    VIOROUTE
			ENDM

@VIOPROC	MACRO	NAME, MASK, OFF, ARGS: VARARG

		@VIOPROLOG	NAME
		FOR ARG, <ARGS>
			ARG
		ENDM
		@VIOSTART	NAME
		@VIOROUTE	NAME, MASK, OFF
		@VIOEPILOG	NAME

			ENDM
